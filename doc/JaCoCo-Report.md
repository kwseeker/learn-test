# JaCoCo 报告

报告内容官方说明： [Coverage Counters](https://www.jacoco.org/jacoco/trunk/doc/counters.html)

JaCoCo 对单元测试覆盖率提供下面几个维度的衡量：

- **Instructions**: Java 字节码指令的覆盖率。执行的最小单位，和代码的格式无关。

  > 某个Java类中只有一个静态方法实现简单的加法运算，对这个静态方法做单元测试，但是报告中显示字节码指令覆盖率只有 57% ？
  >
  > 因为反编译会发现还有一个默认的构造方法，将此构造方法也加入单元测试再次统计会发现覆盖率达到100%。

- **Branches**: 分支覆盖率（这里的分支是指代码逻辑分支）。注意，异常处理不算做分支。

- **Cxty(Cyclomatic Complexity)**: 圈复杂度, JaCoCo 会为每一个**非抽象方法**计算圈复杂度，并为类，包以及组（groups）计算复杂度。圈复杂度定义为一个方法的控制流图中所有可能路径的最小数目，简单的说就是**为了覆盖所有路径所需要执行单元测试数量**，圈复杂度大说明程序代码可能质量低且难于测试和维护。

  JaCoCo 官方介绍了两种圈复杂度计算方式：

  1. 基于控制流图中边的数量（E）和节点的数量（N）计算圈复杂度:
     *v*(*G*)=*E*−*N*+2

  2. 根据分支数（B）和决策点数（D）计算方法的圈复杂度：
     *v*(*G*)=*B*−*D*+1

     其中：

     1. *B* 是分支的数量（即 if 和 switch 语句的数量）。
     2. *D* 是决策点的数量（即 if 和 switch 语句中的条件判断点）。

  > 不过没找到哪里能讲清楚计算细节的，可能需要看源码。

- **Lines**: 行覆盖率，只要本行有一条指令被执行，则本行则被标记为被执行。

- **Methods**: 方法覆盖率，任何非抽象的方法，只要有一条指令被执行，则该方法被计为被执行。

- **Classes**: 类覆盖率，所有类，包括接口，只要其中有一个方法被执行，则标记为被执行。注意：构造函数和静态初始化块也算作方法。
